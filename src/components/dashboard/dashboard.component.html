<div class="p-4 sm:p-6 lg:p-8">
  <h1 class="text-2xl font-bold text-gray-900 mb-6">لوحة التحكم الرئيسية</h1>
  
  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- Today's Revenue -->
    <div class="bg-white p-6 rounded-lg shadow-md flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-500">إيراد اليوم</p>
        <p class="text-3xl font-bold text-gray-900">{{ todaysRevenue() | currency:'دينار ':'symbol':'1.2-2' }}</p>
      </div>
      <div class="bg-green-100 text-green-600 rounded-full p-3">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.75A.75.75 0 013 4.5h.75m0 0h.75A.75.75 0 015.25 6v.75m0 0v-.75A.75.75 0 014.5 4.5h.75M6 13.5V12A.75.75 0 016.75 11.25h.75m0 0V12A.75.75 0 016 13.5h.75m0 0h.75a.75.75 0 01.75.75v.75m0 0V15A.75.75 0 017.5 14.25h.75M17.25 9.75h.75A.75.75 0 0118.75 9V8.25m0 0V9A.75.75 0 0118 9.75h.75M12 9.75h.75A.75.75 0 0113.5 9V8.25m0 0V9A.75.75 0 0112 9.75h.75M14.25 15v-.75a.75.75 0 01.75-.75h.75m0 0v.75a.75.75 0 01-.75.75h-.75m0 0h.75a.75.75 0 01.75.75v.75m0 0v-.75a.75.75 0 01.75-.75h.75M12 15.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75m0 0v-.75A.75.75 0 0113.5 15h.75" />
        </svg>
      </div>
    </div>

    <!-- Active Sessions -->
    <div class="bg-white p-6 rounded-lg shadow-md flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-500">منصات مشغولة حالياً</p>
        <p class="text-3xl font-bold text-gray-900">{{ activeSessions().length }}</p>
      </div>
      <div class="bg-blue-100 text-blue-600 rounded-full p-3">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
           <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
        </svg>
      </div>
    </div>
    
    <!-- Today's kWh -->
    <div class="bg-white p-6 rounded-lg shadow-md flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-500">طاقة اليوم المباعة</p>
        <p class="text-3xl font-bold text-gray-900">{{ todaysKwh() | number:'1.2-2' }} <span class="text-lg">kWh</span></p>
      </div>
      <div class="bg-yellow-100 text-yellow-600 rounded-full p-3">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.243 4.243a3 3 0 11-4.243-4.243" />
        </svg>
      </div>
    </div>

    <!-- Today's Completed Sessions -->
    <div class="bg-white p-6 rounded-lg shadow-md flex items-center justify-between">
      <div>
        <p class="text-sm font-medium text-gray-500">شحنات مكتملة اليوم</p>
        <p class="text-3xl font-bold text-gray-900">{{ todayCompletedSessions().length }}</p>
      </div>
      <div class="bg-purple-100 text-purple-600 rounded-full p-3">
         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
           <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
         </svg>
      </div>
    </div>
  </div>

  <!-- Recent Sessions Table -->
  <div class="mt-8 bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-bold text-gray-800 mb-4">أحدث الشحنات</h2>
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">المركبة</th>
            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">المحطة/المنصة</th>
            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">المبلغ</th>
            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">الحالة</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          @for (session of sessions() | slice:0:5; track session.id) {
            <tr>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ session.vehicleType }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ session.station }} / {{ session.platform }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ session.amount | currency:'دينار ':'symbol':'1.2-2' }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                @if (session.status === 'completed') {
                  <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">مكتملة</span>
                } @else {
                  <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 animate-pulse">نشطة</span>
                }
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="4" class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-500">
                لا توجد بيانات لعرضها.
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>